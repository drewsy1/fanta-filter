<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8" />
        <script defer src="../node_modules/nouislider/distribute/nouislider.min.js"></script>
        <script defer src="../dist/js/bundle.js"></script>
        <script>
            let fantaFilterCurrent;
            let dateSlider;
            let dateValues;

            function timestamp(str) {
                return new Date(str).getTime();
            }

            function toFormattedDateString(date) {
                function pad(number) {
                    if (number < 10) {
                        return '0' + number;
                    }
                    return number;
                }
                return date.getUTCFullYear() + '-' + pad(date.getUTCMonth() + 1) + '-' + pad(date.getUTCDate());
            }

            window.onload = () => {
                dateSlider = document.getElementById('testGroup3Slider');
                dateValues = [document.getElementById('dateLow'), document.getElementById('dateHigh')];

                noUiSlider.create(dateSlider, {
                    // Create two timestamps to define a range.
                    range: {
                        min: timestamp('1970-01-01'),
                        max: timestamp('2019-08-13'),
                    },

                    // Steps of one week
                    step: 7 * 24 * 60 * 60 * 1000,

                    // Two more timestamps indicate the handle starting positions.
                    start: [timestamp('1980'), timestamp('2015')],
                });

                dateSlider.noUiSlider.on('update', function(values, handle) {
                    dateValues[handle].value = new Date(+values[handle]);
                });

                fantaFilterCurrent = FantaFilter.init();
            };
        </script>
        <link rel="stylesheet" href="../node_modules/nouislider/distribute/nouislider.min.css" />
        <style>
            input[type='range'].multirange.ghost {
                --range-color: blue;
            }
            [data-fantafilter-color='blue'] {
                color: blue;
            }
        </style>
    </head>
    <body>
        <div>
            <h1>testGroup1</h1>
            <div
                class="js-fafi-toggle-group"
                id="testGroup1ToggleGroup"
                data-fantafilter-group="testGroup1"
                data-fantafilter-comparer="match"
                data-fantafilter-selector="color"
            >
                <input id="testGroup1ColorsDefault" type="radio" name="color" value="" />
                <label for="testGroup1ColorsDefault">All</label>
                <input id="testGroup1ColorsBlue" type="radio" name="color" value="blue" />
                <label for="testGroup1ColorsBlue">Blue</label>
                <input id="testGroup1ColorsBlack" type="radio" name="color" value="black" />
                <label for="testGroup1ColorsBlack">Black</label>
            </div>
            <input
                class="js-fafi-input"
                data-fantafilter-group="testGroup1"
                title="testGroup1, Input 1"
                id="testGroup1TextFilter"
                data-fantafilter-comparer="match"
                data-fantafilter-selector="innerText"
            />
            <ul class="js-fafi js-fafi-parent" data-fantafilter-group="testGroup1">
                <li class="js-fafi-item" data-fantafilter-group="testGroup1" data-fantafilter-color="blue">
                    testGroup1, Item 0
                </li>
                <li class="js-fafi-item" data-fantafilter-group="testGroup1" data-fantafilter-color="black">
                    testGroup1, Item 1
                </li>
                <li class="js-fafi-item" data-fantafilter-group="testGroup1" data-fantafilter-color="blue">
                    testGroup1, Item 2
                </li>
                <li class="js-fafi-item" data-fantafilter-group="testGroup1" data-fantafilter-color="blue">
                    testGroup1, Item 3
                </li>
                <li class="js-fafi-item" data-fantafilter-group="testGroup1" data-fantafilter-color="black">
                    testGroup1, Item 4
                </li>
                <li class="js-fafi-item" data-fantafilter-group="testGroup1" data-fantafilter-color="blue">
                    testGroup1, Item 5
                </li>
            </ul>

            <h1>testGroup2</h1>
            <input
                class="js-fafi-input"
                data-fantafilter-group="testGroup2"
                title="testGroup2, Input 0"
                id="testGroup2TextFilter"
                data-fantafilter-comparer="match"
                data-fantafilter-selector="innerText"
            />
            <ul class="js-fafi js-fafi-parent" data-fantafilter-group="testGroup2">
                <li class="js-fafi-item" data-fantafilter-group="testGroup2">testGroup2, Item 0</li>
                <li class="js-fafi-item" data-fantafilter-group="testGroup2">testGroup2, Item 1</li>
                <li class="js-fafi-item" data-fantafilter-group="testGroup2">testGroup2, Item 2</li>
                <li class="js-fafi-item" data-fantafilter-group="testGroup2">testGroup2, Item 3</li>
                <li class="js-fafi-item" data-fantafilter-group="testGroup2">testGroup2, Item 4</li>
                <li class="js-fafi-item" data-fantafilter-group="testGroup2">testGroup2, Item 5</li>
            </ul>

            <h1>testGroup3</h1>
            <div
                id="testGroup3Slider"
                class="js-fafi-input"
                type="noUiSlider"
                data-fantafilter-group="testGroup3"
                data-fantafilter-comparer="date"
                data-fantafilter-selector="date-start;date-end"
                data-fantafilter-operator="overlap"
            ></div>
            <div style="display: flex;flex-direction: row;">
                <input type="text" id="dateLow" readonly />
                <input type="text" id="dateHigh" readonly />
            </div>
            <ul class="js-fafi js-fafi-parent" data-fantafilter-group="testGroup3">
                <li
                    class="js-fafi-item"
                    data-fantafilter-group="testGroup3"
                    data-fantafilter-date-start="1977-12-18T05:02:59"
                    data-fantafilter-date-end="1987-12-18T05:02:59"
                >
                    testGroup3, Item 0 1977-12-18T05:02:59
                </li>
                <li
                    class="js-fafi-item"
                    data-fantafilter-group="testGroup3"
                    data-fantafilter-date-start="2005-05-29T17:32:24"
                    data-fantafilter-date-end="2015-05-29T17:32:24"
                >
                    testGroup3, Item 1 2015-05-29T17:32:24
                </li>
                <li
                    class="js-fafi-item"
                    data-fantafilter-group="testGroup3"
                    data-fantafilter-date-start="2000-10-13T02:45:37"
                    data-fantafilter-date-end="2010-10-13T02:45:37"
                >
                    testGroup3, Item 2 2010-10-13T02:45:37
                </li>
                <li
                    class="js-fafi-item"
                    data-fantafilter-group="testGroup3"
                    data-fantafilter-date-start="1985-08-07T05:52:29"
                    data-fantafilter-date-end="1995-08-07T05:52:29"
                >
                    testGroup3, Item 3 1985-08-07T05:52:29
                </li>
                <li
                    class="js-fafi-item"
                    data-fantafilter-group="testGroup3"
                    data-fantafilter-date-start="1996-03-15T11:07:58"
                    data-fantafilter-date-end="2006-03-15T11:07:58"
                >
                    testGroup3, Item 4 1996-03-15T11:07:58
                </li>
                <li
                    class="js-fafi-item"
                    data-fantafilter-group="testGroup3"
                    data-fantafilter-date-start="2004-01-19T09:33:29"
                    data-fantafilter-date-end="2014-01-19T09:33:29"
                >
                    testGroup3, Item 5 2004-01-19T09:33:29
                </li>
            </ul>
        </div>
    </body>
</html>
